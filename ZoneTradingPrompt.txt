TI-2 - duplicate zones removal
Update the code
If two zones of the same timeframe overlap,leave only the earliest one i.e. the one that has the earliest leg-in remove the others

Mark code with the user story TI-2
No other changes to the code!!!Never change the name of the indicator!!!


TI-5 Nested zone strategy

/*
Update the code
Once the pice comes to a zone, check if the zone is within another zone of the same type (supply or demand respectively). 
If yes , then 
    If demand zone - take long, stoploss below the zone at 30% of the zone height. TP at the nearest supply zone above but not closer than 1R
    If supply zone - take short, stoploss above the zone at 30% of the zone height. TP at the nearest demand zone below but not closer than 1R

Mark code with the user story TI-5
No other changes to the code!!!Never change the name of the indicator!!!


*/

Update the code
convert the indicator to a strategy
Once the pice arrives to a zone, check if the zone is within another zone of the same type (supply or demand respectively).
Arrives means: the candle crosses the zone boundary 
for demand the candle high is outside the zone and low is inside the Zone
for supply the candle low is outside the zone and the high is inside the zone

If yes , then 
    If demand zone - take long, stoploss below the zone at 30% of the zone height. TP at 2R
    If supply zone - take short, stoploss above the zone at 30% of the zone height. TP at 2R

Dont make any labels, generate a buy or sell order. 
Also generate alert on entry with the text: "Price entered a nested supply/demand zone"

Change teh code below
Mark changes with the user story ID TI-5
No other changes to the code!!!
Never change the name of the indicator!!!

===================================================================
/*
//TI-6 - Retracement to the zone within trend strategy

Update the code
convert the indicator to a strategy

If there is a downtrend 
and the price revisits a supply zone, meaning a green candle has (high is above  the zone and close below or within the zone) OR (close within the zone)
then 
    enter short,
    SL above the zone at 30% of the zone height
    TP at 2R
  
If there is an uptrend 
and the price revisits a demand zone, meaning a red candle has (low is below  the zone and close above or within the zone) OR (close within the zone)
then 
    enter long,
    SL below the zone at 30% of the zone height
    TP at 2R

Dont make any labels, generate a buy or sell order. 
Also generate alert on entry with the text: "Price retraced to a zone"

Use the code below as teh starting point!!!
Mark changes with the user story ID TI-6
No other changes to the code!!!
Never change the name of the indicator!!!



//TI-6 - Retracement to the zone within trend strategy

Update the code
convert the indicator to a strategy

If there is a downtrend 
and the price revisits a supply zone, meaning a green candle has high or close within the zone
then 
    enter short,
    SL above the zone at 30% of the zone height
    TP at 2R
  
If there is an uptrend 
and the price revisits a demand zone, meaning a red candle has low or close within the zone
then 
    enter long,
    SL below the zone at 30% of the zone height
    TP at 2R

Evaluate revisiting the zones only for the candles on the current timeframe but take in consideration zones on all relevant timeframes
Make sure the entries are generated only when the price touches the zone or closes inside the zone. 
Entries outside the zone are not allowed!!!!

Dont make any labels, generate a buy or sell order. 
Also generate alert on entry with the text: "Price retraced to a zone"



Use the code below as teh starting point!!!
Mark changes with the user story ID TI-6
No other changes to the code!!!
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!
*/
=============================
/*

//TI-6 - Retracement to the zone within trend strategy

Update the code
convert the indicator to a strategy

If there is a downtrend 
and the price revisits a supply zone, meaning a green candle has high or close within the zone
then 
    enter short,
    SL above the zone at 30% of the zone height
    TP at 2R
  
If there is an uptrend 
and the price revisits a demand zone, meaning a red candle has low or close within the zone
then 
    enter long,
    SL below the zone at 30% of the zone height
    TP at 2R

Evaluate revisiting the zones only for the candles on the current timeframe but take in consideration zones on all relevant timeframes
Make sure the entries are generated only when the price touches the zone or closes inside the zone. 
Entries outside the zone are not allowed!!!!

Dont make any labels, generate a buy or sell order. 
Also generate alert on entry with the text: "Price retraced to a zone"



Use the code below as teh starting point!!!
Mark changes with the user story ID TI-6
No other changes to the code!!!
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!
*/

===================================================================== 
//TI-6 - Retracement to the zone within trend strategy
// Just double zones , no trends

Update the code
convert the indicator to a strategy

If the price revisits a supply zone, meaning a green candle has high inside the zone and low outside the zone
and the zone is contained in another supply zone
and the zone does not contain any zones inside
then 
    enter short,
    SL above the zone at 30% of the zone height
    TP at 2R
  
If the price revisits a demand zone, meaning a red candle has low inside the zone and high outside the zone
and the zone is contained in another supply zone
and the zone does not contain any zones inside
then 
    enter long,
    SL below the zone at 30% of the zone height
    TP at 2R

Evaluate revisiting the zones only for the candles on the current timeframe but take in consideration zones on all relevant timeframes
Make sure the entries are generated only when the price touches the zone or closes inside the zone. 
Entries outside the zone are not allowed!!!!

Dont make any labels, generate a buy or sell order. 
Also generate alert on entry with the text: "Price retraced to a zone"



Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!


==================================================


When the price arrives to a zone and rejects from a zone, with a candle about 0.5 ATR (setting in UI) send an alert:
Price of <ticker> rejected from the level ..... <the rejection level>   
Mark the rejection as potial entry: green "B" for long, red "S" for short


Mark the changes with user story ID: TI-7 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!


===========================

UPdate code You dont markt the "rejection" that formed the zone, only the subsequent rejections. I.e. if the rejection candle is the legout - dont mark it as a rejection. also put the "main()" function at the bottom of the script


Update the code markonly the cases when the price revisited the zone and left the zone with a strong move at least 0.5 atr (UI setting) . 
DO not mark if the price remains within the zone - it shoul leave the zone with a strong move or just touch the zone with the minimum or maximum of the candle.


Mark the changes with user story ID: TI-7 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!



============================== 


Remove the TI-7 label from the UI
MAke a setting: Alert on zone depature. Bool, default OFF 
Trigger the allerts and show the B and S labels only if the alerts are ON


Mark the changes with user story ID: TI-7 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!




============================== 


Change the zones colors:
SUpply - red, Demand - green

Mark the changes with user story ID: TI-7 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!


============================== 


Update the script below turn it into a strategy. 

Go long when you generate B, stoploss below the zone from where the price rejected -30% (common setting for all stoplosses)
Take profit - at the bottom of the next available supply zone above

Go whort when you generate S, stoploss above the zone from where the price rejected +30% (common setting for all stoplosses)
Take profit - at the top of the next available demand zone below

Mark the changes with user story ID: TI-9 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!



============================== 


Update the script below turn it into a strategy. 


Go LONG when 
the price makes a strong long move of size  (Rejection Candle Min Body (xATR) setting)  from a demand zone - no matter if the zone is revisited or newly formed
stoploss below the zone from where the price rejected -30% (common setting for all stoplosses)
Take profit  or exit - when there is a srong short move (use Rejection Candle Min Body (xATR) setting) - not at the previous zone 


Go SHORT when the price makes a strong short move of size ( Rejection Candle Min Body (xATR) setting)  from a supply zone - no matter if the zone is revisited or newly formed
stoploss above the zone from where the price rejected +30% (common setting for all stoplosses)
Take profit or exit  - when there is a srong long move (use Rejection Candle Min Body (xATR) setting)

Mark the changes with user story ID: TI-9 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Mark changes with the user story ID TI-6
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!



============================== 


Update the script below turn it into a strategy. 


Go LONG when 
EMA 20 is over EMA50
THe price is in a demand zone close to EMA20 within (Rejection Candle Min Body (xATR) setting), makes strong move UP  (Rejection Candle Min Body (xATR) setting)
stoploss below the zone from where the price rejected -30% (common setting for all stoplosses)
Take profit  or exit - when there is a srong short move (use Rejection Candle Min Body (xATR) setting) - not at the previous zone 


Go SHORT when 
EMA 20 is under EMA50
THe price is in a supply zone close to EMA20 within (Rejection Candle Min Body (xATR) setting) , makes strong move DOWN (Rejection Candle Min Body (xATR) setting)
stoploss above the zone from where the price rejected +30% (common setting for all stoplosses)
Take profit or exit  - when there is a srong long move (use Rejection Candle Min Body (xATR) setting)

Mark the changes with user story ID: TI-9 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Never use user story ide to name functions variables and other identifiers!!!! it is only for comments!!!
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!


=================================
//v20
//Did not work - negative profit

Go LONG when 
THe price is in a demand zone or touches the demand zone with its low
The height of the zone is within (Rejection Candle Min Body (xATR) setting)
stoploss below the zone from where the price rejected -30% (common setting for all stoplosses)
EITHER:
    There is no supply zones above within at least 2R (setting Stoploss distance from zone)
OR
    There is an Uptrend - EMA20 is above EMA50
Take profit - at the next supply zone
Move stoploss to Break even when the price has passed 50% to the target 

Go SHORT when 
THe price is in a supply zone or touches the supply zone with its high
The height of the zone is within (Rejection Candle Min Body (xATR) setting)
stoploss above the zone from where the price rejected +30% (common setting for all stoplosses)
EITHER
    There is no demand zones below within at least 1R (setting Stoploss distance from zone)
OR 
    There is a Downtrend - EMA20 is below EMA50
Take profit - at the next demand zone
Move stoploss to Break even when the price has passed 50% to the target 

Mark the changes with user story ID: TI-9 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Never use user story ide to name functions variables and other identifiers!!!! it is only for comments!!!
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
Never use the functions that are not in the standard library, like math.inf
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!



=================================


Go LONG when 
THe price is in a demand zone or touches the demand zone with its low
The height of the zone is within (Rejection Candle Min Body (xATR) setting)
stoploss below the zone from where the price rejected -30% (common setting for all stoplosses)
EITHER:
    There is no supply zones above within at least 2R (setting Stoploss distance from zone)
OR
    There is an Uptrend - EMA20 is above EMA50
Take profit - at the next supply zone
Move stoploss to Break even when the price has passed 50% to the target 

Go SHORT when 
THe price is in a supply zone or touches the supply zone with its high
The height of the zone is within (Rejection Candle Min Body (xATR) setting)
stoploss above the zone from where the price rejected +30% (common setting for all stoplosses)
EITHER
    There is no demand zones below within at least 1R (setting Stoploss distance from zone)
OR 
    There is a Downtrend - EMA20 is below EMA50
Take profit - at the next demand zone
Move stoploss to Break even when the price has passed 50% to the target 

Mark the changes with user story ID: TI-9 

Use the code below as the starting point!!!
IMPORTANT!!! Any other changes to the code except for the requested ones are strongly prohibited!!!
Never use user story ide to name functions variables and other identifiers!!!! it is only for comments!!!
Never change the name of the indicator!!!
The code you generate must be syntactycally correct pinescript , compile without errors
Never use the functions that are not in the standard library, like math.inf
never name functions after the user story ID like TI-6, TI-2.... give them meaningful names!
DOUBLE CHECK THE SYNTACTICAL CORRECTNESS!!!!